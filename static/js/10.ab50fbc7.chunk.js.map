{"version":3,"sources":["pages/Login.js"],"names":["Wrapper","styled","div","Header","h1","P","p","layout","labelCol","span","wrapperCol","tailLayout","offset","Login","history","useHistory","AuthStore","useStores","name","initialValues","remember","onFinish","values","setUsername","username","setPassword","password","login","then","message","success","push","catch","e","toString","indexOf","error","onFinishFailed","errorInfo","console","log","Item","label","rules","required","Password","onClick","type","htmlType"],"mappings":"4uBAMA,IAAMA,EAAUC,IAAOC,IAAV,KAQPC,EAASF,IAAOG,GAAV,KAINC,EAAIJ,IAAOK,EAAV,KAYDC,EAAS,CACbC,SAAU,CACRC,KAAM,GAERC,WAAY,CACVD,KAAM,KAGJE,EAAa,CACjBD,WAAY,CACVE,OAAQ,GACRH,KAAM,KAqFKI,UAjFD,WACZ,IAAMC,EAAUC,cACRC,EAAcC,cAAdD,UA8BR,OACE,eAAChB,EAAD,WACE,cAACG,EAAD,2BACA,eAAC,IAAD,2BACMI,GADN,IAEEW,KAAK,QACLC,cAAe,CACbC,UAAU,GAEZC,SAtCW,SAACC,GAChBN,EAAUO,YAAYD,EAAOE,UAC7BR,EAAUS,YAAYH,EAAOI,UAC7BV,EAAUW,QACPC,MAAK,WACJC,IAAQC,QAAQ,4BAChBhB,EAAQiB,KAAK,QAEdC,OAAM,SAACC,GACHA,EAAEC,WAAWC,QAAQ,sCAAsC,EAC5DN,IAAQO,MAAM,0DACPH,EAAEC,WAAWC,QAAQ,uBAAuB,EACnDN,IAAQO,MAAM,gHACPH,EAAEC,WAAWC,QAAQ,gEAAc,EAC1CN,IAAQO,MAAM,wLAEdP,IAAQO,MAAM,gFAuBhBC,eAlBiB,SAACC,GACtBC,QAAQC,IAAI,UAAWF,IAUrB,UASE,cAAC,IAAKG,KAAN,CACEC,MAAM,qBACNxB,KAAK,WACLyB,MAAO,CACL,CACEC,UAAU,EACVf,QAAS,+CANf,SAUE,cAAC,IAAD,MAGF,cAAC,IAAKY,KAAN,CACEC,MAAM,eACNxB,KAAK,WACLyB,MAAO,CACL,CACEC,UAAU,EACVf,QAAS,yCANf,SAUE,cAAC,IAAMgB,SAAP,MAEF,eAACxC,EAAD,4CAAQ,wBAAQyC,QAzCC,WACrBhC,EAAQiB,KAAK,cAwCD,6BAER,cAAC,IAAKU,KAAN,2BAAe9B,GAAf,aACE,cAAC,IAAD,CAAQoC,KAAK,UAAUC,SAAS,SAAhC","file":"static/js/10.ab50fbc7.chunk.js","sourcesContent":["import React from 'react'\r\nimport {useStores} from '../stores/index'\r\nimport {Form, Input, Button, message} from 'antd'\r\nimport styled from 'styled-components'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nconst Wrapper = styled.div`\r\n  max-width: 600px;\r\n  margin: 30px auto;\r\n  box-shadow: 0 4px 14px 3px rgba(0,0,0,0.2);\r\n  border-radius: 4px;\r\n  padding: 20px;\r\n`;\r\n\r\nconst Header = styled.h1`\r\n  text-align: center;\r\n`;\r\n\r\nconst P = styled.p`\r\n  margin-left: 90px;\r\n  button {\r\n    border: none;\r\n    background: #fff;\r\n    color: #007bff;\r\n    outline: none;\r\n    cursor: pointer;\r\n    padding: 0;\r\n  }\r\n`\r\n\r\nconst layout = {\r\n  labelCol: {\r\n    span: 6,\r\n  },\r\n  wrapperCol: {\r\n    span: 16,\r\n  },\r\n}\r\nconst tailLayout = {\r\n  wrapperCol: {\r\n    offset: 11,\r\n    span: 13,\r\n  },\r\n}\r\n\r\nconst Login = () => {\r\n  const history = useHistory();\r\n  const { AuthStore } = useStores()\r\n  const onFinish = (values) => {\r\n    AuthStore.setUsername(values.username)\r\n    AuthStore.setPassword(values.password)\r\n    AuthStore.login()\r\n      .then(()=>{\r\n        message.success('登录成功')\r\n        history.push('/')\r\n      })\r\n      .catch((e)=>{\r\n        if(e.toString().indexOf('The username and password mismatch')>0){\r\n          message.error('密码错误，登录失败')\r\n        }else if(e.toString().indexOf('Could not find user')>0){\r\n          message.error('用户名不存在，请确认用户名或注册账号')\r\n        }else if(e.toString().indexOf('登录失败次数超过限制')>0){\r\n          message.error('登录失败次数超过限制，请稍候再试，或者通过忘记密码重设密码。')\r\n        }else {\r\n          message.error('发生未知错误，请稍后再试')\r\n        }\r\n      })\r\n  }\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo)\r\n  }\r\n\r\n  const handleRegister = () => {\r\n    history.push('/register')\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Header>登录</Header>\r\n      <Form\r\n        {...layout}\r\n        name=\"basic\"\r\n        initialValues={{\r\n          remember: true,\r\n        }}\r\n        onFinish={onFinish}\r\n        onFinishFailed={onFinishFailed}\r\n      >\r\n        <Form.Item\r\n          label=\"用户名\"\r\n          name=\"username\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: '请输入用户名！',\r\n            }\r\n          ]}\r\n        >\r\n          <Input/>\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"密码\"\r\n          name=\"password\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: '请输入密码！',\r\n            }\r\n          ]}\r\n        >\r\n          <Input.Password/>\r\n        </Form.Item>\r\n        <P>还没注册？<button onClick={handleRegister}>注册</button></P>\r\n\r\n        <Form.Item {...tailLayout}>\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            提交\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default Login"],"sourceRoot":""}