{"version":3,"sources":["components/Title.js","components/UploaderResult.js","components/Uploader.js","components/Tips.js","pages/Home.js"],"names":["Title","styled","div","Component","children","Result","H1","h1","Image","img","Hr","Space","Dt","dt","observer","refWidth","useRef","refHeight","ImageStore","useStores","store","useLocalObservable","width","setWidth","height","setHeight","serverFile","attributes","url","widthStr","heightStr","rel","target","href","filename","src","alt","ref","onChange","current","value","placeholder","fullStr","Dragger","Upload","DraggerWrapper","UserStore","props","showUploadList","beforeUpload","file","setFile","setFilename","name","currentUser","message","warning","test","type","size","error","uploader","then","console","log","catch","tip","spinning","isLoading","className","InboxOutlined","UploaderResult","Tips","Home","Uploader"],"mappings":"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","file":"static/js/9.33dbfb28.chunk.js","sourcesContent":["import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst Title = styled.div`\r\n  font-size: 40px;\r\n  font-weight: normal;\r\n  border-bottom: 1px solid #eee;\r\n`\r\n\r\nconst Component = ({children}) => {\r\n  return (\r\n    <>\r\n      <Title>{children}</Title>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Component","import React, {useRef} from 'react'\r\nimport {useStores} from '../stores'\r\nimport {observer, useLocalObservable} from 'mobx-react'\r\nimport styled from 'styled-components'\r\n\r\n\r\nconst Result = styled.div`\r\n  margin-top: 30px;\r\n  border: 1px dashed #ccc;\r\n  padding: 20px;\r\n`\r\n\r\nconst H1 = styled.h1`\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n`\r\n\r\nconst Image = styled.img`\r\n  max-width: 300px;\r\n`\r\n\r\nconst Hr = styled.div`\r\n  margin: 5px 0;\r\n  border-bottom: 1px solid #ddd;\r\n`\r\n\r\nconst Space = styled.div`\r\n  height: 20px;\r\n`\r\n\r\nconst Dt = styled.dt`\r\n  font-weight: bold;\r\n`\r\n\r\nconst Component = observer(() => {\r\n  const refWidth = useRef()\r\n  const refHeight = useRef()\r\n  const {ImageStore} = useStores()\r\n  const store = useLocalObservable(() => ({\r\n    width: null,\r\n    setWidth (width){\r\n      store.width = width\r\n    },\r\n    get widthStr() {\r\n      return store.width ? `/w/${store.width}` : ''\r\n    },\r\n    height: null,\r\n    setHeight (height){\r\n      store.height = height\r\n    },\r\n    get heightStr() {\r\n      return store.height ? `/h/${store.height}` : ''\r\n    },\r\n    get fullStr() {\r\n      return ImageStore.serverFile.attributes.url.attributes.url + '?imageView2/0' + store.widthStr + store.heightStr\r\n    }\r\n  }))\r\n  const bingWidthChange = () => {\r\n    store.setWidth(refWidth.current.value)\r\n  }\r\n  const bingHeightChange = () => {\r\n    store.setHeight(refHeight.current.value)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {\r\n        ImageStore.serverFile ? <Result>\r\n          <H1>上传结果</H1>\r\n          <dl>\r\n            <Dt>线上地址</Dt>\r\n            <Hr/>\r\n            <dd>\r\n              <a rel=\"noreferrer\" target=\"_blank\" href={ImageStore.serverFile.attributes.url.attributes.url}>\r\n                {ImageStore.serverFile.attributes.url.attributes.url}\r\n              </a>\r\n            </dd>\r\n            <Space/>\r\n            <Dt>文件名</Dt>\r\n            <Hr/>\r\n            <dd>{ImageStore.filename}</dd>\r\n            <Space/>\r\n            <Dt>图片预览</Dt>\r\n            <Hr/>\r\n            <dd>\r\n              <Image src={ImageStore.serverFile.attributes.url.attributes.url} alt=\"加载失败\"/>\r\n            </dd>\r\n            <Space/>\r\n            <Dt>更多尺寸</Dt>\r\n            <Hr/>\r\n            <dd>\r\n              <input ref={refWidth} onChange={bingWidthChange} placeholder=\"最大宽度(可选)\"/>\r\n              <input ref={refHeight} onChange={bingHeightChange} placeholder=\"最大高度(可选)\"/>\r\n            </dd>\r\n            <dd>\r\n              <a target=\"_blank\" rel=\"noreferrer\" href={store.fullStr}>{store.fullStr}</a>\r\n            </dd>\r\n          </dl>\r\n        </Result> : null\r\n      }\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Component","import React from 'react'\r\nimport {useStores} from '../stores'\r\nimport {observer} from 'mobx-react'\r\nimport {Upload, message, Spin} from 'antd'\r\nimport {InboxOutlined} from '@ant-design/icons'\r\nimport UploaderResult from './UploaderResult'\r\nimport styled from 'styled-components'\r\n\r\nconst {Dragger} = Upload\r\n\r\nconst DraggerWrapper = styled(Dragger)`\r\n  margin-top: 32px;\r\n`\r\n\r\nconst Component = observer(() => {\r\n  const {ImageStore, UserStore} = useStores()\r\n  const props = {\r\n    showUploadList: false,\r\n    beforeUpload: file => {\r\n      ImageStore.setFile(file)\r\n      ImageStore.setFilename(file.name)\r\n      if (UserStore.currentUser === null) {\r\n        message.warning('请先登录再上传!')\r\n        return false\r\n      }\r\n      if(!/(svg$)|(png$)|(jpg$)|(jpeg$)|(gif$)/ig.test(file.type)){\r\n        message.error('只能上传png/svg/jpg/gif格式的图片')\r\n        return false\r\n      }\r\n      if(file.size > 1024*1024){\r\n        message.error('图片尺寸最大1M')\r\n        return false\r\n      }\r\n      ImageStore.uploader()\r\n        .then((serverFile) => {\r\n          console.log('上传成功')\r\n          console.log(serverFile)\r\n        }).catch(() => {\r\n        console.log('上传失败')\r\n      })\r\n      return false\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Spin tip=\"上传中...\" spinning={ImageStore.isLoading}>\r\n        <DraggerWrapper {...props}>\r\n          <p className=\"ant-upload-drag-icon\">\r\n            <InboxOutlined/>\r\n          </p>\r\n          <p className=\"ant-upload-text\">点击或拖拽上传图片</p>\r\n          <p className=\"ant-upload-hint\">\r\n            仅支持.png/.svg/.jpg/.jpeg/.gif格式的图片\r\n          </p>\r\n        </DraggerWrapper>\r\n      </Spin>\r\n      <UploaderResult/>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Component","import React from 'react'\r\nimport {useStores} from '../stores'\r\nimport {observer} from 'mobx-react'\r\nimport styled from 'styled-components'\r\nimport Title from '../components/Title'\r\n\r\nconst Tips = styled.div`\r\n  text-align: center;\r\n  background: #f90;\r\n  padding: 10px;\r\n  margin: 30px 0;\r\n  color: #fff;\r\n  border-radius: 4px;\r\n`;\r\n\r\nconst Component = observer(({children}) => {\r\n  const {UserStore, ImageStore} = useStores()\r\n  return (\r\n    <div>\r\n      {UserStore.currentUser ?\r\n        (ImageStore.serverFile ? null : <Title>请上传您的图片</Title>)\r\n        :\r\n        <Tips>{children}</Tips>\r\n      }\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Component","import React from 'react';\r\nimport Uploader from '../components/Uploader'\r\nimport Tips from '../components/Tips'\r\nimport {observer} from 'mobx-react'\r\n\r\nconst  Home = observer(() => {\r\n  return (\r\n    <div>\r\n      <Tips>请先登录再上传</Tips>\r\n      <Uploader />\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Home"],"sourceRoot":""}